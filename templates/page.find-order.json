{
  "sections": {
    "main": {
      "type": "main-page",
      "disabled": true,
      "settings": {}
    },
    "find_order": {
      "type": "custom-liquid",
      "settings": {
        "custom_liquid": "<div class=\"page-width\" style=\"max-width: 600px; margin: 60px auto; padding: 20px;\">\n  <h1 style=\"text-align: center; margin-bottom: 30px;\">Find Your Order</h1>\n  \n  <p style=\"text-align: center; margin-bottom: 30px; color: #666;\">\n    Can't find your download email? Enter your order details below.\n  </p>\n\n  <div style=\"margin-bottom: 20px;\">\n    <label style=\"display: block; margin-bottom: 8px; font-weight: 600;\">Order Number</label>\n    <input type=\"text\" id=\"orderNumber\" placeholder=\"e.g., #1001\" style=\"width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px; box-sizing: border-box;\">\n  </div>\n\n  <div style=\"margin-bottom: 20px;\">\n    <label style=\"display: block; margin-bottom: 8px; font-weight: 600;\">Email Address</label>\n    <input type=\"email\" id=\"email\" placeholder=\"your@email.com\" style=\"width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px; box-sizing: border-box;\">\n  </div>\n\n  <button onclick=\"lookupOrder()\" id=\"lookupBtn\" style=\"width: 100%; padding: 15px; background: #000; color: #fff; border: none; border-radius: 4px; font-size: 16px; font-weight: 600; cursor: pointer;\">\n    Find My Order\n  </button>\n\n  <div id=\"result\" style=\"margin-top: 30px; padding: 20px; border-radius: 4px; display: none;\"></div>\n\n  <div style=\"text-align: center; margin-top: 40px; padding-top: 30px; border-top: 1px solid #eee;\">\n    <p style=\"margin-bottom: 10px;\">Still need help?</p>\n    <p>Email us: <a href=\"mailto:support@cookingwithkahnke.com\" style=\"color: #000; text-decoration: underline;\">support@cookingwithkahnke.com</a></p>\n  </div>\n</div>\n\n<script>\n// API endpoint - UPDATE THIS with your deployed serverless function URL\nconst API_ENDPOINT = 'https://your-api-endpoint.vercel.app/api/find-order';\n\nasync function lookupOrder() {\n  const orderNum = document.getElementById('orderNumber').value.trim();\n  const email = document.getElementById('email').value.trim();\n  const resultDiv = document.getElementById('result');\n  const lookupBtn = document.getElementById('lookupBtn');\n  \n  // Validation\n  if (!orderNum || !email) {\n    resultDiv.style.display = 'block';\n    resultDiv.style.background = '#ffebee';\n    resultDiv.style.border = '1px solid #f44336';\n    resultDiv.innerHTML = '<p style=\"color: #c62828; margin: 0;\">Please fill in both fields.</p>';\n    return;\n  }\n  \n  // Email validation\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  if (!emailRegex.test(email)) {\n    resultDiv.style.display = 'block';\n    resultDiv.style.background = '#ffebee';\n    resultDiv.style.border = '1px solid #f44336';\n    resultDiv.innerHTML = '<p style=\"color: #c62828; margin: 0;\">Please enter a valid email address.</p>';\n    return;\n  }\n  \n  // Clean the order number (remove # if present)\n  const cleanOrderNum = orderNum.replace(/[#\\s]/g, '');\n  \n  // Show loading state\n  lookupBtn.disabled = true;\n  lookupBtn.textContent = 'Searching...';\n  resultDiv.style.display = 'block';\n  resultDiv.style.background = '#e3f2fd';\n  resultDiv.style.border = '1px solid #2196f3';\n  resultDiv.innerHTML = '<p style=\"margin: 0; color: #1976d2;\">Searching for your order...</p>';\n  \n  try {\n    // Call API\n    const response = await fetch(API_ENDPOINT, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        order_number: cleanOrderNum,\n        email: email\n      })\n    });\n    \n    const data = await response.json();\n    \n    if (!response.ok || !data.success) {\n      throw new Error(data.message || 'Order not found');\n    }\n    \n    // Check if we have order_status_url\n    if (data.order_status_url) {\n      // Redirect to Shopify order status page\n      window.location.href = data.order_status_url;\n    } else {\n      // Fallback: show success message with manual link\n      resultDiv.style.display = 'block';\n      resultDiv.style.background = '#e8f5e9';\n      resultDiv.style.border = '1px solid #4caf50';\n      resultDiv.innerHTML = '<p style=\"margin: 0 0 15px 0;\"><strong>âœ… Order Found!</strong></p><p style=\"margin: 0 0 20px 0;\">Please check your email for the order confirmation link.</p>';\n      lookupBtn.disabled = false;\n      lookupBtn.textContent = 'Find My Order';\n    }\n    \n  } catch (error) {\n    // Show error\n    resultDiv.style.display = 'block';\n    resultDiv.style.background = '#ffebee';\n    resultDiv.style.border = '1px solid #f44336';\n    resultDiv.innerHTML = '<p style=\"color: #c62828; margin: 0;\">' + (error.message || 'An error occurred. Please try again.') + '</p>';\n    lookupBtn.disabled = false;\n    lookupBtn.textContent = 'Find My Order';\n  }\n}\n</script>"
      }
    }
  },
  "order": [
    "main",
    "find_order"
  ]
}
